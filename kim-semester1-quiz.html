<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz Asas Kimia Kelas X</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Font for better look -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">
    <!-- LaTeX Rendering Library (KaTeX) -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/katex.min.css">
    
    <style>
        /* Custom styling */
        body {
            font-family: 'Inter', sans-serif;
        }
        .answer-option {
            transition: all 0.15s;
            cursor: pointer;
        }
        .answer-option:hover:not(.disabled) {
            transform: translateY(-2px);
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.06);
        }
        .disabled {
            pointer-events: none;
        }
        /* Status styles for results */
        .correct-answer {
            background-color: #d1fae5 !important; /* Green 100 */
            border-color: #059669 !important; /* Green 600 */
        }
        .incorrect-answer {
            background-color: #fee2e2 !important; /* Red 100 */
            border-color: #dc2626 !important; /* Red 600 */
        }
        .selected-answer {
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        }
        /* KaTeX inline/display adjustment */
        .katex-display {
            overflow-x: auto;
            overflow-y: hidden;
            padding: 8px 0;
            text-align: left !important;
        }
        .rationale-box {
            border-left: 4px solid #4f46e5;
            background-color: #f0f4ff;
        }
    </style>
</head>
<body class="bg-gray-50 min-h-screen p-4 sm:p-8">

    <div id="main-container" class="max-w-4xl mx-auto bg-white rounded-xl shadow-2xl p-6 sm:p-10 mb-10">

        <header class="text-center mb-8 border-b pb-4">
            <h1 class="text-3xl sm:text-4xl font-extrabold text-indigo-700">Quiz Asas Kimia Kelas X (35 Soal)</h1>
            <p id="timer-display" class="text-xl font-mono text-gray-600 mt-2 hidden">Waktu: <span id="timer-value">00:00</span></p>
        </header>

        <!-- 1. WELCOME SCREEN -->
        <div id="welcome-screen">
            <h2 class="text-2xl font-bold text-gray-800 mb-4">Petunjuk Pengerjaan Soal</h2>
            <ul class="list-disc list-inside space-y-3 text-gray-700 mb-8 p-4 bg-indigo-50 rounded-lg">
                <li>Klik tombol <strong>Mulai Mengerjakan Soal</strong> untuk memulai kuis.</li>
                <li>Timer pengerjaan akan dimulai dari <strong>0 detik</strong> dan terus berjalan. Tidak ada batasan waktu.</li>
                <li>Semua <strong>35 soal</strong> akan ditampilkan pada satu halaman.</li>
                <li>Pilih semua jawabanmu, lalu klik tombol <strong>Kirim Jawaban</strong> di bagian bawah.</li>
                <li>Setelah kirim, kamu akan melihat hasil, skor (1-100%), serta pembahasan yang <strong>lengkap</strong> untuk setiap soal.</li>
            </ul>

            <div class="flex flex-col sm:flex-row justify-center space-y-4 sm:space-y-0 sm:space-x-6">
                <button onclick="showMaterialModal()" class="px-8 py-3 bg-gray-500 text-white font-semibold rounded-lg hover:bg-gray-600 transition-colors shadow-md">
                    Ringkasan Materi
                </button>
                <button onclick="startQuiz()" class="px-8 py-3 bg-indigo-600 text-white font-semibold rounded-lg hover:bg-indigo-700 transition-colors shadow-lg">
                    Mulai Mengerjakan Soal
                </button>
            </div>
        </div>
        
        <!-- 2. QUIZ SCREEN (Hidden initially) -->
        <div id="quiz-screen" class="hidden">
            <form id="quiz-form" onsubmit="event.preventDefault(); submitQuiz();">
                <div id="questions-container" class="space-y-8">
                    <!-- Questions will be dynamically loaded here -->
                </div>

                <div class="mt-10 pt-6 border-t border-gray-200 text-center">
                    <button id="submit-button" type="submit" class="w-full sm:w-auto px-10 py-3 bg-green-600 text-white font-bold text-lg rounded-lg hover:bg-green-700 transition-colors shadow-xl">
                        Kirim Jawaban
                    </button>
                </div>
            </form>
        </div>

        <!-- 3. RESULTS SCREEN (Hidden initially) -->
        <div id="results-screen" class="hidden">
            <h2 class="text-3xl font-bold text-center text-indigo-700 mb-6">Hasil Pengerjaan Kuis</h2>
            
            <!-- Summary Box -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-8 text-center">
                <div class="p-4 bg-indigo-100 rounded-lg shadow-md">
                    <p class="text-sm text-indigo-700 font-medium">Skor</p>
                    <p id="result-score" class="text-4xl font-extrabold text-indigo-800 mt-1">0%</p>
                </div>
                <div class="p-4 bg-green-100 rounded-lg shadow-md">
                    <p class="text-sm text-green-700 font-medium">Jawaban Benar</p>
                    <p id="result-correct" class="text-4xl font-extrabold text-green-800 mt-1">0</p>
                </div>
                <div class="p-4 bg-red-100 rounded-lg shadow-md">
                    <p class="text-sm text-red-700 font-medium">Jawaban Salah</p>
                    <p id="result-incorrect" class="text-4xl font-extrabold text-red-800 mt-1">0</p>
                </div>
            </div>
            
            <p class="text-center text-gray-600 mb-6">Waktu pengerjaan: <span id="result-time" class="font-bold text-indigo-600">00:00</span></p>

            <h3 class="text-2xl font-semibold text-gray-800 border-b pb-2 mb-4">Pembahasan Soal</h3>
            <div id="results-details-container" class="space-y-8">
                <!-- Detailed results and rationales will be loaded here -->
            </div>

            <div class="mt-10 pt-6 border-t border-gray-200 text-center">
                <button onclick="window.location.reload()" class="px-8 py-3 bg-indigo-600 text-white font-semibold rounded-lg hover:bg-indigo-700 transition-colors shadow-md hover:shadow-lg">
                    Ulangi Kuis
                </button>
            </div>
        </div>

    </div>
    
    <!-- Notifikasi/Modal untuk Ringkasan Materi -->
    <div id="material-modal" class="fixed inset-0 bg-gray-900 bg-opacity-75 flex items-center justify-center p-4 hidden">
        <div id="modal-content" class="bg-white rounded-xl shadow-3xl max-w-sm w-full p-8 transform transition-all duration-300">
            <h2 class="text-xl font-bold text-indigo-700 mb-4">Informasi Materi</h2>
            <p class="text-gray-700 mb-6">Ringkasan materi akan dibuat di halaman terpisah. Silakan lanjutkan dengan kuis!</p>
            <button onclick="hideMaterialModal()" class="w-full px-6 py-2 bg-indigo-600 text-white font-semibold rounded-lg hover:bg-indigo-700">
                Tutup
            </button>
        </div>
    </div>


    <!-- KaTeX Scripts must load before the main script -->
    <script src="https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/katex.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/contrib/auto-render.min.js"></script>
    

    <script>
        // --- QUIZ DATA (35 Soal) ---
        const quizData = [
            // 1. Partikel Dasar
            {
                question: "Manakah yang merupakan 3 partikel dasar penyusun atom?",
                correctOptionIndex: 2,
                options: [
                    { text: "Neutron, Deuteron, dan Triton" },
                    { text: "Quark, Lepton, dan Foton" },
                    { text: "Proton, Elektron, dan Neutron" },
                    { text: "Kation, Anion, dan Ion" }
                ],
                rationale: "Atom tersusun dari inti atom yang terdiri dari <strong>Proton</strong> (bermuatan positif) dan <strong>Neutron</strong> (tidak bermuatan), serta <strong>Elektron</strong> (bermuatan negatif) yang mengelilingi inti.<br>Pilihan lain salah: Deuteron dan Triton bukan partikel dasar penyusun atom, melainkan isotop hidrogen. Quark dan Lepton adalah partikel sub-atomik yang lebih mendasar. Kation dan Anion adalah bentuk atom bermuatan."
            },
            // 2. Partikel Unsur Fe
            {
                question: "Tentukan jumlah proton ($p$), elektron ($e$), dan neutron ($n$) pada unsur $^{56}_{26}\\text{Fe}$.",
                correctOptionIndex: 2,
                options: [
                    { text: "$p=26, e=26, n=56$" },
                    { text: "$p=56, e=56, n=30$" },
                    { text: "$p=26, e=26, n=30$" },
                    { text: "$p=30, e=30, n=26$" }
                ],
                rationale: "Nomor Atom ($Z=26$) menentukan jumlah <strong>Proton</strong> ($p=26$).<br>Untuk atom netral, jumlah <strong>Elektron</strong> ($e$) = $p = 26$.<br><strong>Neutron</strong> ($n$) dihitung dari Nomor Massa ($A=56$) dikurangi Nomor Atom ($Z$): $n = A - Z = 56 - 26 = 30$."
            },
            // 3. Nomor Massa Atom X
            {
                question: "Suatu atom netral mempunyai 3 kulit atom dan 7 elektron valensi. Jika dalam intinya terdapat 18 neutron, berapakah nomor massa ($A$) atom tersebut?",
                correctOptionIndex: 2,
                options: [
                    { text: "$17$" },
                    { text: "$25$" },
                    { text: "$35$" },
                    { text: "$40$" }
                ],
                rationale: "Atom memiliki 3 kulit dan 7 elektron valensi, sehingga konfigurasi elektronnya adalah $2-8-7$.<br>Jumlah Elektron Total = $2+8+7 = 17$.<br>Karena atom netral, jumlah <strong>Proton</strong> ($Z$) = $17$.<br>Nomor Massa ($A$) adalah jumlah proton ditambah neutron: $A = Z + n = 17 + 18 = 35$."
            },
            // 4. Definisi Isotop, Isoton, Isobar
            {
                question: "Apa definisi yang benar mengenai <strong>isobar</strong>?",
                correctOptionIndex: 2,
                options: [
                    { text: "Atom-atom yang memiliki nomor atom ($Z$) sama tetapi nomor massa ($A$) berbeda." },
                    { text: "Atom-atom dari unsur yang berbeda yang memiliki jumlah neutron ($n$) sama." },
                    { text: "Atom-atom dari unsur yang berbeda yang memiliki nomor massa ($A$) sama." },
                    { text: "Atom-atom yang memiliki jumlah elektron valensi sama." }
                ],
                rationale: "Isobar ($iso$=sama, $bar$=massa/berat) adalah atom-atom dari unsur yang berbeda yang memiliki <strong>Nomor Massa ($A$) yang sama</strong>.<br>Pilihan A adalah <strong>Isotop</strong> ($Z$ sama). Pilihan B adalah <strong>Isoton</strong> ($n$ sama)."
            },
            // 5. Pasangan Isotop, Isoton, Isobar
            {
                question: "Dari daftar $^{16}_{8}\\text{O}$, $^{14}_{7}\\text{N}$, $^{23}_{11}\\text{Na}$, $^{24}_{12}\\text{Mg}$, dan $^{14}_{6}\\text{C}$, manakah pasangan yang termasuk <strong>isoton</strong>?",
                correctOptionIndex: 2,
                options: [
                    { text: "$^{16}_{8}\\text{O}$ dan $^{15}_{8}\\text{O}$ (Isotop)" },
                    { text: "$^{14}_{7}\\text{N}$ dan $^{14}_{6}\\text{C}$ (Isobar)" },
                    { text: " $^{23}_{11}\\text{Na}$ dan $^{24}_{12}\\text{Mg}$ (Isoton)" },
                    { text: "$^{23}_{11}\\text{Na}$ dan $^{14}_{6}\\text{C}$ (Tidak ada hubungan)" }
                ],
                rationale: "Isoton adalah pasangan yang memiliki jumlah <strong>Neutron ($n$) yang sama</strong>.<br>Hitung $n$ untuk setiap pasangan:<br>- $^{23}_{11}\\text{Na}$: $n = 23 - 11 = 12$<br>- $^{24}_{12}\\text{Mg}$: $n = 24 - 12 = 12$<br>Karena $n$ sama ($12$), pasangan ini adalah <strong>isoton</strong>."
            },
            // 6. Pernyataan Isoton (Benar-Salah)
            {
                question: "Unsur $A$ ($10$ proton, $12$ neutron) dan $B$ ($A=23, Z=11$) termasuk <strong>isoton</strong>. (Benar / Salah)",
                correctOptionIndex: 0,
                options: [
                    { text: "Benar" },
                    { text: "Salah" }
                ],
                rationale: "Unsur $A$ memiliki $n=12$ (diberikan).<br>Unsur $B$ memiliki $n = A - Z = 23 - 11 = 12$.<br>Karena jumlah neutron keduanya sama ($12$) dan nomor atomnya berbeda ($10 \\neq 11$), maka keduanya adalah <strong>Isoton</strong>. Pernyataan ini <strong>Benar</strong>."
            },
            // 7. Teori Atom Bohr
            {
                question: "Manakah pernyataan yang paling tepat menjelaskan teori atom Niels Bohr?",
                correctOptionIndex: 2,
                options: [
                    { text: "Elektron tersebar merata dalam atom seperti roti kismis." },
                    { text: "Elektron bergerak mengelilingi inti pada lintasan acak sambil memancarkan energi secara terus-menerus." },
                    { text: "Elektron hanya dapat berada pada orbit stasioner tertentu tanpa memancarkan energi. [Image of Model atom Bohr]" },
                    { text: "Atom terdiri dari inti yang sangat kecil dan padat dikelilingi oleh elektron." }
                ],
                rationale: "Teori Bohr menyatakan bahwa elektron bergerak mengelilingi inti pada <strong>orbit stasioner</strong> (kulit atom) dengan energi tetap (diskrit) dan <strong>tidak memancarkan energi</strong> selama berada di orbit tersebut. Energi hanya diserap/dipancarkan saat elektron berpindah kulit (eksitasi/de-eksitasi). [Image of Model atom Bohr]"
            },
            // 8. Konfigurasi dan Letak 35/80 X
            {
                question: "Tuliskan Konfigurasi elektron (Bohr) dan tentukan letak unsur $^{80}_{35}\\text{X}$ dalam tabel periodik.",
                correctOptionIndex: 1,
                options: [
                    { text: "$2-8-8-17$; Golongan $VIIA$, Periode $4$" },
                    { text: "$2-8-18-7$; Golongan $VIIA$, Periode $4$" },
                    { text: "$2-8-18-7$; Golongan $VIIB$, Periode $4$" },
                    { text: "$2-8-17$; Golongan $VIIA$, Periode $3$" }
                ],
                rationale: "Nomor atom $Z=35$.<br>- <strong>Konfigurasi Bohr</strong>: Pengisian kulit ($K, L, M, N$): $2-8-18-7$ (total 35).<br>- <strong>Periode</strong>: Jumlah kulit = $4 \\rightarrow$ <strong>Periode 4</strong>.<br>- <strong>Golongan</strong>: Elektron valensi (kulit terluar) = $7 \\rightarrow$ <strong>Golongan VIIA</strong>."
            },
            // 9. Bilangan Kuantum Azimut (Benar-Salah)
            {
                question: "Bilangan kuantum azimut ($\\ell$) berfungsi untuk menyatakan sub kulit. (Benar / Salah)",
                correctOptionIndex: 0,
                options: [
                    { text: "Benar" },
                    { text: "Salah" }
                ],
                rationale: "Fungsi bilangan kuantum azimut ($\\ell$) adalah menentukan <strong>bentuk sub kulit</strong> (orbital) dan sub tingkat energi. Nilai $\\ell=0, 1, 2, 3$ berturut-turut untuk sub kulit $s, p, d, f$. Pernyataan ini <strong>Benar</strong>."
            },
            // 10. Kapasitas Elektron d dan f
            {
                question: "Sub kulit $d$ maksimum menampung elektron sebanyak $X$, sedangkan sub kulit $f$ menampung $Y$. Nilai $X$ dan $Y$ adalah...",
                correctOptionIndex: 1,
                options: [
                    { text: "$X=6, Y=10$" },
                    { text: "$X=10, Y=14$" },
                    { text: "$X=10, Y=18$" },
                    { text: "$X=14, Y=18$" }
                ],
                rationale: "Jumlah elektron maksimum = $2 \\times$ (Jumlah Orbital).<br>- Sub kulit $d$ memiliki 5 orbital ($m$: $-2, -1, 0, +1, +2$). Maka $X = 5 \\times 2 = <strong>10$</strong>.<br>- Sub kulit $f$ memiliki 7 orbital ($m$: $-3$ sampai $+3$). Maka $Y = 7 \\times 2 = <strong>14$</strong>."
            },
            // 11. Kisaran Kuantum Magnetik f
            {
                question: "Harga $m$ (kuantum magnetik) yang dimiliki sub kulit $f$ memiliki kisaran harga $-3$ sampai $+3$. (Benar / Salah)",
                correctOptionIndex: 0,
                options: [
                    { text: "Benar" },
                    { text: "Salah" }
                ],
                rationale: "Nilai bilangan kuantum magnetik ($m$) berkisar dari $-\\ell$ hingga $+\\ell$. Untuk sub kulit $f$, nilai azimutnya adalah $\\ell=3$. Jadi, $m$ adalah $-3, -2, -1, 0, +1, +2, +3$. Pernyataan ini <strong>Benar</strong>."
            },
            // 12. Spin dalam Satu Orbital
            {
                question: "Apakah dua elektron dalam satu orbital dapat memiliki spin yang sama? Jelaskan alasannya.",
                correctOptionIndex: 2,
                options: [
                    { text: "Ya, karena spin tidak terikat pada orbital." },
                    { text: "Tidak, karena keduanya akan saling tolak-menolak dengan kuat." },
                    { text: "Tidak, sesuai Asas Larangan Pauli, spin harus berlawanan ($\\frac{1}{2}$ dan $-\\frac{1}{2}$). " },
                    { text: "Ya, asalkan mereka memiliki energi yang sama." }
                ],
                rationale: "Jawabannya adalah <strong>Tidak</strong>. Hal ini sesuai dengan <strong>Asas Larangan Pauli</strong>, yang menyatakan bahwa tidak boleh ada dua elektron dalam satu atom yang memiliki keempat bilangan kuantum ($n, \\ell, m, s$) yang sama. Jika $n, \\ell,$ dan $m$ sama (berada di orbital yang sama), maka $s$ harus berlawanan ($\\pm \\frac{1}{2}$) untuk membedakan keduanya. "
            },
            // 13. Konfigurasi Elektron 52/26 X (Benar-Salah)
            {
                question: "Konfigurasi elektron unsur $^{52}_{26}\\text{X}$ (Nomor Atom $26$) adalah $[\\text{Ar}] 4s^2 3d^4$. (Benar / Salah)",
                correctOptionIndex: 1,
                options: [
                    { text: "Benar" },
                    { text: "Salah" }
                ],
                rationale: "Nomor atom $Z=26$. Berdasarkan Aturan Aufbau, konfigurasi yang benar adalah $1s^2 \\dots 3p^6 4s^2 3d^6$ atau disingkat $[\\text{Ar}] 4s^2 3d^6$ (Besi/Fe). Konfigurasi yang diberikan salah, karena $[\\text{Ar}] 4s^2 3d^4$ hanya memiliki 24 elektron. Pernyataan ini <strong>Salah</strong>."
            },
            // 14. Konfigurasi Ion Fe3+ (Benar-Salah)
            {
                question: "Konfigurasi elektron ion $\\text{Fe}^{3+}$ (Nomor Atom $\\text{Fe}=26$) adalah $[\\text{Ar}] 4s^0 3d^5$. (Benar / Salah)",
                correctOptionIndex: 0,
                options: [
                    { text: "Benar" },
                    { text: "Salah" }
                ],
                rationale: "1. Konfigurasi $\\text{Fe}$ netral ($Z=26$): $[\\text{Ar}] 4s^2 3d^6$.<br>2. Ion $\\text{Fe}^{3+}$ terbentuk dengan melepaskan $3$ elektron. Pelepasan selalu dimulai dari <strong>kulit terluar</strong> ($n$ terbesar), yaitu $4s$.<br>3. Pelepasan $2e^-$ dari $4s$ dan $1e^-$ sisanya dari $3d$.<br>4. Hasil: $[\\text{Ar}] 4s^0 3d^{6-1} = <strong>[\\text{Ar}] 3d^5$</strong>. Pernyataan ini <strong>Benar</strong>."
            },
            // 15. Bilangan Kuantum Ca
            {
                question: "Tentukan harga keempat bilangan kuantum ($n, \\ell, m, s$) untuk elektron terakhir dari unsur $^{40}_{20}\\text{Ca}$.",
                correctOptionIndex: 1,
                options: [
                    { text: "$n=3, \\ell=2, m=0, s=-1/2$" },
                    { text: "$n=4, \\ell=0, m=0, s=-1/2$" },
                    { text: "$n=4, \\ell=1, m=-1, s=+1/2$" },
                    { text: "$n=4, \\ell=0, m=0, s=+1/2$" }
                ],
                rationale: "1. Konfigurasi $20\\text{Ca}$: $1s^2 \\dots 3p^6 \\mathbf{4s^2}$.<br>2. Elektron terakhir (ke-20) berada di $\\mathbf{4s^2}$.<br>- <strong>$n$</strong> (Kulit) = 4<br>- <strong>$\\ell$</strong> (Subkulit $s$) = 0<br>- <strong>$m$</strong> (Orbital $s$) = 0<br>- <strong>$s$</strong> (Spin elektron kedua/berpasangan) = $-\\frac{1}{2}$."
            },
            // 16. Nomor Atom X dari Bilangan Kuantum Ion
            {
                question: "Bilangan kuantum elektron terakhir ion $\\text{X}^{2+}$ adalah $n=3, \\ell=2, m=+2, s=+1/2$. Berapakah nomor atom unsur $X$?",
                correctOptionIndex: 0,
                options: [
                    { text: "$25$" },
                    { text: "$23$" },
                    { text: "$27$" },
                    { text: "$28$" }
                ],
                rationale: "1. $n=3, \\ell=2 \\rightarrow$ Elektron berada di subkulit <strong>$3d$</strong>.<br>2. $m=+2, s=+1/2$ adalah elektron pengisi orbital $3d$ yang <strong>kelima</strong> (sesuai Aturan Hund).<br>3. Konfigurasi $\\text{X}^{2+}$ berakhir di $3d^5$. Total $e^-$ ion: $[\\text{Ar}] 3d^5 = 18 + 5 = 23$ elektron.<br>4. Atom $X$ netral ($e$ total $23 + 2$): $Z=25$. <strong>Nomor atomnya adalah 25</strong>."
            },
            // 17. Elektron Tidak Berpasangan Z=23
            {
                question: "Pada atom yang bernomor $23$ ($V$), terdapat elektron yang tidak berpasangan sebanyak...",
                correctOptionIndex: 1,
                options: [
                    { text: "$2$" },
                    { text: "$3$" },
                    { text: "$4$" },
                    { text: "$5$" }
                ],
                rationale: "1. Konfigurasi $Z=23$ ($V$): $[\\text{Ar}] 4s^2 \\mathbf{3d^3}$.<br>2. Orbital $4s^2$ terisi penuh (berpasangan).<br>3. Orbital $3d$ memiliki $3$ elektron. Berdasarkan <strong>Aturan Hund</strong>, $3$ elektron ini mengisi orbital tunggal dengan spin paralel.<br>4. Terdapat <strong>3 elektron tidak berpasangan</strong> dalam orbital $3d$."
            },
            // 18. Letak Unsur 24/52 X
            {
                question: "Tentukan letak unsur $^{52}_{24}\\text{X}$ ($Z=24$) dalam Sistem Periodik Unsur (SPU).",
                correctOptionIndex: 0,
                options: [
                    { text: "Periode 4, Golongan VIB" },
                    { text: "Periode 4, Golongan IVA" },
                    { text: "Periode 3, Golongan VIB" },
                    { text: "Periode 4, Golongan VB" }
                ],
                rationale: "1. Konfigurasi $Z=24$ ($\text{Cr}$): $[\\text{Ar}] \\mathbf{4s^1 3d^5}$ (Anomali kestabilan setengah penuh).<br>2. <strong>Periode</strong>: $n$ terbesar $4 \\rightarrow$ <strong>Periode 4</strong>.<br>3. <strong>Golongan</strong> ($s+d$): $1 + 5 = 6 \\rightarrow$ <strong>Golongan VIB</strong>."
            },
            // 19. Sistem Triad Dobereiner
            {
                question: "Jelaskan dasar pengelompokkan unsur berdasarkan sistem Triad Dobereiner.",
                correctOptionIndex: 2,
                options: [
                    { text: "Unsur dikelompokkan berdasarkan kenaikan nomor atom." },
                    { text: "Sifat unsur berulang setiap 8 unsur." },
                    { text: "Unsur dikelompokkan menjadi tiga-tiga (triad) di mana unsur tengah memiliki sifat dan massa rata-rata unsur pertama dan ketiga." },
                    { text: "Unsur dikelompokkan berdasarkan konfigurasi elektron terluar." }
                ],
                rationale: "Dobereiner mengelompokkan unsur menjadi tiga (triad) berdasarkan kesamaan sifat. Ciri utamanya: <strong>massa atom relatif unsur yang di tengah mendekati rata-rata massa atom unsur pertama dan ketiga</strong>."
            },
            // 20. Dasar Pengelompokan SPU Modern
            {
                question: "Apa dasar pengelompokkan unsur pada SPU Modern?",
                correctOptionIndex: 1,
                options: [
                    { text: "Berdasarkan kenaikan massa atom relatif dan kesamaan sifat kimia." },
                    { text: "Berdasarkan kenaikan nomor atom ($Z$)." },
                    { text: "Berdasarkan jumlah kulit atom dan jumlah proton." },
                    { text: "Berdasarkan penemuan sinar-X oleh Rontgen." }
                ],
                rationale: "SPU Modern (ditemukan oleh Moseley) disusun berdasarkan <strong>kenaikan nomor atom ($Z$)</strong>. Dasar ini menunjukkan bahwa sifat-sifat unsur berulang secara periodik seiring kenaikan $Z$, dan ini digunakan bersama dengan kesamaan konfigurasi elektron terluar."
            },
            // 21. Unsur Golongan Sama
            {
                question: "Manakah di antara unsur-unsur ${}_{3}\\text{P}, {}_{12}\\text{Q}, {}_{19}\\text{R}, {}_{33}\\text{S}, dan {}_{53}\\text{T}$ yang terletak dalam <strong>golongan yang sama</strong>?",
                correctOptionIndex: 1,
                options: [
                    { text: "P ($Z=3$) dan Q ($Z=12$)" },
                    { text: "P ($Z=3$) dan R ($Z=19$)" },
                    { text: "Q ($Z=12$) dan S ($Z=33$)" },
                    { text: "S ($Z=33$) dan T ($Z=53$)" }
                ],
                rationale: "Golongan ditentukan oleh <strong>elektron valensi</strong>:<br>- $\\text{P} (Z=3)$: $2s^1 \\rightarrow$ Golongan <strong>IA</strong><br>- $\\text{Q} (Z=12)$: $3s^2 \\rightarrow$ Golongan IIA<br>- $\\text{R} (Z=19)$: $4s^1 \\rightarrow$ Golongan <strong>IA</strong><br>- $\\text{S} (Z=33)$: $4s^2 4p^3 \\rightarrow$ Golongan VA<br>- $\\text{T} (Z=53)$: $5s^2 5p^5 \\rightarrow$ Golongan VIIA<br>Pasangan $\\text{P}$ dan $\\text{R}$ memiliki 1 elektron valensi, sehingga berada di Golongan IA."
            },
            // 22. Kesimpulan Keelektronegatifan (Benar-Salah)
            {
                question: "Perhatikan tren sifat periodik. Kesimpulan keelektronegatifan unsur: $R > S > P > Q$. (Benar / Salah)",
                correctOptionIndex: 1,
                options: [
                    { text: "Benar" },
                    { text: "Salah" }
                ],
                rationale: "Sifat <strong>Keelektronegatifan</strong> cenderung <strong>meningkat dari kiri ke kanan (periode)</strong> dan <strong>dari bawah ke atas (golongan)</strong>. Karena $Q$ berada paling atas/kanan, maka $Q$ harus memiliki nilai keelektronegatifan tertinggi (paling elektronegatif). Urutan yang benar seharusnya adalah $Q > R > S > P$. Pernyataan yang diberikan <strong>Salah</strong>. "
            },
            // 23. Unsur X (Z=20) termasuk Halogen (Benar-Salah)
            {
                question: "Unsur $\\text{X}$ dengan Nomor Atom $20$ termasuk dalam kelompok unsur halogen. (Benar / Salah)",
                correctOptionIndex: 1,
                options: [
                    { text: "Benar" },
                    { text: "Salah" }
                ],
                rationale: "Unsur $\\text{X}$ dengan $Z=20$ (Kalsium, $\\text{Ca}$) memiliki konfigurasi $4s^2$. Elektron valensi $2 \\rightarrow$ <strong>Golongan IIA</strong>. Kelompok ini dinamakan <strong>Alkali Tanah</strong>.<br>Halogen adalah nama untuk Golongan VIIA. Pernyataan ini <strong>Salah</strong>."
            },
            // 24. Unsur Satu Golongan Transisi B (Benar-Salah)
            {
                question: "Unsur yang berada dalam satu golongan transisi ($B$) adalah $Q$ dan $R$, dengan $Q=[\\text{Ne}] 3s^2 3p^6$ dan $R=[\\text{Ar}] 4s^2 3d^{10} 4p^6$. (Benar / Salah)",
                correctOptionIndex: 1,
                options: [
                    { text: "Benar" },
                    { text: "Salah" }
                ],
                rationale: "1. Unsur $Q$ dan $R$ memiliki konfigurasi kulit valensi penuh ($s^2 p^6$).<br>2. Unsur $Q$ ($Z=18$) dan $R$ ($Z=36$) keduanya adalah <strong>Gas Mulia</strong> (Golongan VIIIA), bukan unsur transisi (Golongan B).<br>Pernyataan ini <strong>Salah</strong>."
            },
            // 25. Notasi Unsur X dan Golongannya
            {
                question: "Ion $\\text{X}^{2+}$ memiliki konfigurasi $2-8-8$. Jika unsur $X$ mempunyai 20 neutron, tuliskan notasi unsurnya dan golongannya.",
                correctOptionIndex: 0,
                options: [
                    { text: "$^{40}_{20}\\text{X}$, Golongan IIA" },
                    { text: "$^{38}_{20}\\text{X}$, Golongan IIA" },
                    { text: "$^{40}_{20}\\text{X}$, Golongan VIIIA" },
                    { text: "$^{38}_{18}\\text{X}$, Golongan VIIIA" }
                ],
                rationale: "1. Elektron ion $\\text{X}^{2+}$: $2+8+8 = 18$ elektron.<br>2. Atom $X$ netral ($Z$): $18$ (e) $+ 2$ (kehilangan muatan) $= 20$ elektron. Maka <strong>$Z=20$</strong>.<br>3. Nomor massa $A = Z + n = 20 + 20 = 40$. Notasi: $\\mathbf{^{40}_{20}\\text{X}}$.<br>4. Konfigurasi $X$ netral ($2-8-8-2$) memiliki $e$ valensi $2 \\rightarrow$ <strong>Golongan IIA</strong>."
            },
            // 26. Golongan IIA (Benar-Salah)
            {
                question: "Kelompok unsur pada golongan IIA diberi nama alkali tanah. (Benar / Salah)",
                correctOptionIndex: 0,
                options: [
                    { text: "Benar" },
                    { text: "Salah" }
                ],
                rationale: "Pernyataan ini <strong>Benar</strong>. Golongan IA (kecuali $\\text{H}$) dinamakan logam alkali, dan Golongan IIA dinamakan logam <strong>Alkali Tanah</strong>."
            },
            // 27. Notasi Unsur R (Benar-Salah)
            {
                question: "Ion $\\text{R}^{2-}$ memiliki konfigurasi $2-8-8$. Jika unsur $R$ memiliki $16$ neutron, maka notasi unsur $R$ adalah $^{32}_{16}\\text{R}$. (Benar / Salah)",
                correctOptionIndex: 0,
                options: [
                    { text: "Benar" },
                    { text: "Salah" }
                ],
                rationale: "1. Elektron ion $\\text{R}^{2-}$: $2+8+8 = 18$ elektron.<br>2. Atom $R$ netral ($Z$): $18$ (e) $- 2$ (kelebihan muatan) $= 16$ elektron. Maka <strong>$Z=16$</strong>.<br>3. Nomor massa $A = Z + n = 16 + 16 = 32$. Notasi: $\\mathbf{^{32}_{16}\\text{R}}$.<br>Pernyataan ini <strong>Benar</strong>."
            },
            // 28. Senyawa Mg2+ dan PO43-
            {
                question: "Jika ion $\\text{Mg}^{2+}$ berikatan dengan ion $\\text{PO}_4^{3-}$, tuliskan rumus senyawa dan nama senyawanya.",
                correctOptionIndex: 2,
                options: [
                    { text: "Rumus $\\text{Mg}_2(\\text{PO}_4)_3$, nama Magnesium Fosfat" },
                    { text: "Rumus $\\text{Mg}_3(\\text{PO}_4)_2$, nama Magnesium (II) Fosfat" },
                    { text: "Rumus $\\text{Mg}_3(\\text{PO}_4)_2$, nama Magnesium Fosfat" },
                    { text: "Rumus $\\text{MgPO}_4$, nama Magnesium Fosfat" }
                ],
                rationale: "1. Senyawa ion harus netral: Muatan $\\text{Mg}^{2+}$ dan $\\text{PO}_4^{3-}$ harus seimbang. KPK dari $2$ dan $3$ adalah $6$.<br>2. Rumus: $3 \\times \\text{Mg}^{2+} + 2 \\times \\text{PO}_4^{3-} \\rightarrow$ $\\mathbf{\\text{Mg}_3(\\text{PO}_4)_2}$.<br>3. Penamaan: Kation logam utama ($\\text{Mg}^{2+}$) <strong>tidak memerlukan angka Romawi</strong>. Nama: <strong>Magnesium Fosfat</strong>."
            },
            // 29. Senyawa Cr3+ dan OH- (Benar-Salah)
            {
                question: "Ion $\\text{Cr}^{3+}$ berikatan dengan $\\text{OH}^{-}$ membentuk senyawa $\\text{Cr}(\\text{OH})_3$ yang dinamakan Kromium(III) hidroksida. (Benar / Salah)",
                correctOptionIndex: 0,
                options: [
                    { text: "Benar" },
                    { text: "Salah" }
                ],
                rationale: "1. Rumus Senyawa: $\\text{Cr}^{3+}$ dan $\\text{OH}^{-}$ seimbang pada rasio $1:3$, menghasilkan $\\mathbf{\\text{Cr}(\\text{OH})_3}$.<br>2. Penamaan: $\\text{Cr}$ adalah logam transisi, sehingga muatannya ($3+$) <strong>harus dicantumkan dalam angka Romawi</strong>. Nama: <strong>Kromium(III) hidroksida</strong>. Pernyataan ini <strong>Benar</strong>."
            },
            // 30. Nama Senyawa Fe(NO3)2 (Benar-Salah)
            {
                question: "Nama senyawa $\\text{Fe}(\\text{NO}_3)_2$ adalah Besi(II) nitrat. (Benar / Salah)",
                correctOptionIndex: 0,
                options: [
                    { text: "Benar" },
                    { text: "Salah" }
                ],
                rationale: "1. $\\text{NO}_3$ adalah ion nitrat ($1-$). Muatan total anion adalah $2 \\times (1-) = 2-$.<br>2. Maka $\\text{Fe}$ harus bermuatan $2+$. $\\text{Fe}^{2+}$ dinamakan <strong>Besi(II)</strong>.<br>3. Nama senyawanya <strong>Besi(II) nitrat</strong>. Pernyataan ini <strong>Benar</strong>."
            },
            // 31. Nama IUPAC Senyawa Reaksi Karbit
            {
                question: "Pada reaksi $\\text{CaC}_2(s) + 2\\text{H}_2\\text{O}(\\ell) \\to \\text{Ca}(\\text{OH})_2 (aq) + \\text{C}_2\\text{H}_2(g)$, tuliskan Nama IUPAC senyawa yang dihasilkan.",
                correctOptionIndex: 2,
                options: [
                    { text: "Kalsium hidroksida dan Etana" },
                    { text: "Kalsium oksida dan Etuna" },
                    { text: "Kalsium hidroksida dan Etuna" },
                    { text: "Kalsium sulfat dan Metana" }
                ],
                rationale: "Dua senyawa yang dihasilkan adalah $\\text{Ca}(\\text{OH})_2$ (senyawa ion) dan $\\text{C}_2\\text{H}_2$ (senyawa organik).<br>1. $\\mathbf{\\text{Ca}(\\text{OH})_2}$: <strong>Kalsium hidroksida</strong>.<br>2. $\\mathbf{\\text{C}_2\\text{H}_2}$: Hidrokarbon alkuna dengan 2 atom karbon. Nama IUPAC-nya adalah <strong>Etuna</strong> (nama umum: asetilena)."
            },
            // 32. Koefisien Reaksi Setara C8H18 (Benar-Salah)
            {
                question: "Supaya reaksi $\\text{aC}_8\\text{H}_{18} + \\text{bO}_2 \\to \\text{cCO}_2 + \\text{dH}_2\\text{O}$ setara, maka koefisien $a, b, c, d$ berturut-turut adalah $2, 25, 16, 18$. (Benar / Salah)",
                correctOptionIndex: 0,
                options: [
                    { text: "Benar" },
                    { text: "Salah" }
                ],
                rationale: "Pengecekan Keseimbangan Atom dengan koefisien $a=2, b=25, c=16, d=18$:<br>$\\mathbf{\\text{C}}$: Kiri $2\\times 8 = 16$. Kanan $16\\times 1 = 16$. (Setara)<br>$\\mathbf{\\text{H}}$: Kiri $2\\times 18 = 36$. Kanan $18\\times 2 = 36$. (Setara)<br>$\\mathbf{\\text{O}}$: Kiri $25\\times 2 = 50$. Kanan $(16\\times 2) + (18\\times 1) = 32 + 18 = 50$. (Setara)<br>Reaksi setara. Pernyataan ini <strong>Benar</strong>."
            },
            // 33. Penyetaraan Reaksi Amonia
            {
                question: "Persamaan reaksi kimia yang setara untuk penguraian gas amonia ($\\text{NH}_3$) menjadi gas nitrogen dan gas hidrogen adalah...",
                correctOptionIndex: 1,
                options: [
                    { text: "$2\\text{NH}_3(g) \\to 2\\text{N}_2(g) + 3\\text{H}_2(g)$" },
                    { text: "$2\\text{NH}_3(g) \\to \\text{N}_2(g) + 3\\text{H}_2(g)$" },
                    { text: "$\\text{NH}_3(g) \\to \\text{N}_2(g) + \\text{H}_2(g)$" },
                    { text: "$2\\text{NH}_3(g) \\to \\text{N}_2(g) + 2\\text{H}_2(g)$" }
                ],
                rationale: "Reaksi: $a\\text{NH}_3(g) \\to b\\text{N}_2(g) + c\\text{H}_2(g)$.<br>Untuk menyetarakan: Koefisien $a=2, b=1, c=3$ digunakan untuk menyeimbangkan atom N dan H.<br>Persamaan setara: $\\mathbf{2\\text{NH}_3(g) \\to \\text{N}_2(g) + 3\\text{H}_2(g)}$."
            },
            // 34. Penyetaraan Reaksi Besi dan Klor
            {
                question: "Tuliskan persamaan reaksi kimia yang benar (setara) untuk reaksi Besi ($\\text{Fe}$) dengan klor ($\\text{Cl}_2$) membentuk besi(III) klorida ($\\text{FeCl}_3$).",
                correctOptionIndex: 2,
                options: [
                    { text: "$\\text{Fe}(s) + \\text{Cl}_2(g) \\to \\text{FeCl}_3(s)$" },
                    { text: "$\\text{Fe}(s) + 3\\text{Cl}_2(g) \\to 2\\text{FeCl}_3(s)$" },
                    { text: "$2\\text{Fe}(s) + 3\\text{Cl}_2(g) \\to 2\\text{FeCl}_3(s)$" },
                    { text: "$2\\text{Fe}(s) + 2\\text{Cl}_2(g) \\to 2\\text{FeCl}_3(s)$" }
                ],
                rationale: "Reaksi: $\\text{Fe} + \\text{Cl}_2 \\to \\text{FeCl}_3$.<br>1. Setarakan $\\text{Cl}$: KPK dari $2$ dan $3$ adalah $6$. Gunakan $3\\text{Cl}_2$ dan $2\\text{FeCl}_3$.<br>2. Setarakan $\\text{Fe}$: Koefisien $2$ di kanan, maka koefisien $2$ di kiri.<br>Persamaan setara: $\\mathbf{2\\text{Fe}(s) + 3\\text{Cl}_2(g) \\to 2\\text{FeCl}_3(s)}$."
            },
            // 35. Persamaan Reaksi MgO dan H2SO4
            {
                question: "Tuliskan persamaan reaksi kimia untuk padatan magnesium oksida ($\\text{MgO}$) dengan larutan asam sulfat ($\\text{H}_2\\text{SO}_4$) menghasilkan magnesium sulfat dan air.",
                correctOptionIndex: 1,
                options: [
                    { text: "$\\text{Mg}(\\text{OH})_2(s) + \\text{H}_2\\text{SO}_4(aq) \\to \\text{MgSO}_4(aq) + 2\\text{H}_2\\text{O}(\\ell)$" },
                    { text: "$\\text{MgO}(s) + \\text{H}_2\\text{SO}_4(aq) \\to \\text{MgSO}_4(aq) + \\text{H}_2\\text{O}(\\ell)$" },
                    { text: "$\\text{Mg}(s) + \\text{H}_2\\text{SO}_4(aq) \\to \\text{MgSO}_4(aq) + \\text{H}_2(g)$" },
                    { text: "$\\text{Mg}_2\\text{O}(s) + \\text{H}_2\\text{SO}_4(aq) \\to \\text{MgSO}_4(aq) + \\text{H}_2\\text{O}(\\ell)$" }
                ],
                rationale: "Reaksi yang terjadi adalah reaksi asam-basa antara oksida basa ($\\mathbf{\\text{MgO}}$) dan asam kuat ($\\mathbf{\\text{H}_2\\text{SO}_4}$), menghasilkan garam ($\\mathbf{\\text{MgSO}_4}$) dan air ($\\mathbf{\\text{H}_2\\text{O}}$).<br>Persamaan yang setara: $\\text{MgO}(s) + \\text{H}_2\\text{SO}_4(aq) \\to \\text{MgSO}_4(aq) + \\text{H}_2\\text{O}(\\ell)$."
            }
        ];

        // --- GLOBAL STATE ---
        let timerInterval;
        let seconds = 0;
        // Inisialisasi array untuk 35 soal
        let userAnswers = new Array(quizData.length).fill(null); 

        // --- KATE X INIT ---
        function initKaTeX() {
            if (typeof renderMathInElement === 'function') {
                renderMathInElement(document.body, {
                    delimiters: [
                        {left: "$$", right: "$$", display: true},
                        {left: "$", right: "$", display: false}, // Inline mode for linear display
                    ],
                    throwOnError: false
                });
            } else {
                console.error("KaTeX auto-render function is not loaded.");
                // Fallback for visual confirmation if KaTeX failed to load
                document.querySelectorAll('.question-card, .answer-option').forEach(el => {
                    el.innerHTML = el.innerHTML.replace(/\$\$(.*?)\$\$/g, (match, p1) => `<span style="color: red; font-style: italic;">[RUMUS: ${p1.trim()}]</span>`);
                    el.innerHTML = el.innerHTML.replace(/\$(.*?)\$/g, (match, p1) => `<span style="color: red; font-style: italic;">[RUMUS: ${p1.trim()}]</span>`);
                });
            }
        }

        // --- TIMER LOGIC ---
        function startTimer() {
            seconds = 0;
            document.getElementById('timer-display').classList.remove('hidden');
            timerInterval = setInterval(() => {
                seconds++;
                const min = Math.floor(seconds / 60);
                const sec = seconds % 60;
                document.getElementById('timer-value').textContent = 
                    `${min.toString().padStart(2, '0')}:${sec.toString().padStart(2, '0')}`;
            }, 1000);
        }

        function stopTimer() {
            clearInterval(timerInterval);
        }

        // --- SCREEN CONTROL ---
        function showMaterialModal() {
            const modal = document.getElementById('material-modal');
            modal.classList.remove('hidden');
            // Animate modal content
            const modalContent = document.getElementById('modal-content');
            modalContent.classList.remove('scale-95', 'opacity-0');
            modalContent.classList.add('scale-100', 'opacity-100');
        }

        function hideMaterialModal() {
            const modal = document.getElementById('material-modal');
            const modalContent = document.getElementById('modal-content');
            modalContent.classList.remove('scale-100', 'opacity-100');
            modalContent.classList.add('scale-95', 'opacity-0');
            setTimeout(() => {
                modal.classList.add('hidden');
            }, 300);
        }

        function startQuiz() {
            document.getElementById('welcome-screen').classList.add('hidden');
            document.getElementById('quiz-screen').classList.remove('hidden');
            loadAllQuestions();
            startTimer();
        }

        function loadAllQuestions() {
            const container = document.getElementById('questions-container');
            container.innerHTML = '';
            
            quizData.forEach((qData, qIndex) => {
                const qElement = document.createElement('div');
                qElement.className = 'question-card p-5 bg-white border border-gray-200 rounded-lg shadow-sm';
                qElement.innerHTML = `
                    <p class="text-lg font-semibold text-gray-800 mb-3">Soal ${qIndex + 1}:</p>
                    <p class="text-md text-gray-700 mb-4">${qData.question}</p>
                    <div id="options-${qIndex}" class="space-y-3">
                        ${qData.options.map((option, oIndex) => `
                            <div class="answer-option p-3 border-2 border-gray-300 rounded-lg" 
                                 data-q-index="${qIndex}" 
                                 data-o-index="${oIndex}">
                                <span class="font-medium">${String.fromCharCode(65 + oIndex)}.</span> ${option.text}
                            </div>
                        `).join('')}
                    </div>
                `;
                container.appendChild(qElement);
            });

            // Add event listeners after rendering
            document.querySelectorAll('.answer-option').forEach(element => {
                element.addEventListener('click', handleAnswerClick);
            });

            // Re-render KaTeX for new content
            initKaTeX();
        }

        function handleAnswerClick(event) {
            const element = event.currentTarget;
            const qIndex = parseInt(element.dataset.qIndex);
            const oIndex = parseInt(element.dataset.oIndex);

            // Remove selected state from siblings
            document.getElementById(`options-${qIndex}`).querySelectorAll('.answer-option').forEach(sibling => {
                sibling.classList.remove('selected-answer', 'border-indigo-500', 'bg-indigo-50');
            });

            // Set selected state for current element
            element.classList.add('selected-answer', 'border-indigo-500', 'bg-indigo-50');
            userAnswers[qIndex] = oIndex;
        }

        // --- SUBMIT AND RESULTS ---
        function submitQuiz() {
            stopTimer();
            document.getElementById('quiz-screen').classList.add('hidden');
            document.getElementById('results-screen').classList.remove('hidden');
            calculateAndDisplayResults();
        }

        function calculateAndDisplayResults() {
            let correctCount = 0;
            const totalQuestions = quizData.length;
            
            // 1. Calculate Score
            quizData.forEach((qData, qIndex) => {
                const selectedIndex = userAnswers[qIndex];
                if (selectedIndex !== null && selectedIndex === qData.correctOptionIndex) {
                    correctCount++;
                }
            });

            const incorrectCount = totalQuestions - correctCount;
            const scorePercentage = Math.round((correctCount / totalQuestions) * 100);

            // 2. Display Summary
            document.getElementById('result-score').textContent = `${scorePercentage}%`;
            document.getElementById('result-correct').textContent = correctCount;
            document.getElementById('result-incorrect').textContent = incorrectCount;
            document.getElementById('result-time').textContent = document.getElementById('timer-value').textContent;

            // 3. Display Detailed Results
            const detailsContainer = document.getElementById('results-details-container');
            detailsContainer.innerHTML = '';

            quizData.forEach((qData, qIndex) => {
                const selectedIndex = userAnswers[qIndex];
                const isCorrect = selectedIndex !== null && selectedIndex === qData.correctOptionIndex;
                const qDetailElement = document.createElement('div');
                qDetailElement.className = 'p-5 rounded-lg shadow-md border-2 ' + (
                    isCorrect ? 'border-green-300 bg-green-50' : 'border-red-300 bg-red-50'
                );
                
                // Question Header
                qDetailElement.innerHTML = `
                    <p class="text-xl font-bold text-gray-800 mb-2">Soal ${qIndex + 1} 
                        <span class="ml-2 px-3 py-1 text-sm rounded-full font-semibold ${isCorrect ? 'bg-green-600 text-white' : 'bg-red-600 text-white'}">
                            ${isCorrect ? 'BENAR' : 'SALAH'}
                        </span>
                    </p>
                    <p class="text-md text-gray-700 mb-4">${qData.question}</p>
                `;

                // Options with highlighting
                const optionsList = document.createElement('div');
                optionsList.className = 'space-y-3 mb-4';
                qData.options.forEach((option, oIndex) => {
                    const isSelected = oIndex === selectedIndex;
                    const isCorrectOption = oIndex === qData.correctOptionIndex;
                    
                    let className = 'p-3 border rounded-lg disabled ';
                    if (isCorrectOption) {
                        className += 'correct-answer font-bold';
                    } else if (isSelected && !isCorrectOption) {
                        className += 'incorrect-answer selected-answer';
                    } else {
                        className += 'border-gray-300 bg-white';
                    }

                    optionsList.innerHTML += `
                        <div class="${className}">
                            <span class="font-medium">${String.fromCharCode(65 + oIndex)}.</span> ${option.text}
                            ${isSelected && !isCorrectOption ? '<span class="ml-2 text-xs font-semibold">(Jawabanmu)</span>' : ''}
                            ${isCorrectOption ? '<span class="ml-2 text-xs font-semibold">(Jawaban Benar)</span>' : ''}
                        </div>
                    `;
                });
                qDetailElement.appendChild(optionsList);

                // Rationale/Pembahasan (Accessing the single rationale)
                const rationaleBox = document.createElement('div');
                rationaleBox.className = 'rationale-box p-4 rounded-lg text-gray-700 text-sm';
                // Using innerHTML to correctly interpret <strong> and <br> tags
                rationaleBox.innerHTML = `<p class="font-semibold text-indigo-800 mb-1">Pembahasan:</p><p>${qData.rationale}</p>`;
                qDetailElement.appendChild(rationaleBox);

                detailsContainer.appendChild(qDetailElement);
            });

            // Re-render KaTeX for results screen
            initKaTeX();
        }
    </script>
</body>
</html>
